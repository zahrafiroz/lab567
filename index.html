<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Overdose deaths in the USA by; drug type, sex, age, race, and Hispanic origin</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
    <!-- include google web fonts -->
    <link href="https://fonts.googleapis.com/css?family=Titillium+Web|Oswald" rel="stylesheet">
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.8.1/mapbox-gl.css" rel="stylesheet">
    <!-- include icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="c3.min.css">
    <style>

    </style>
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.8.1/mapbox-gl.js"></script>
    <script src="d3.js"></script>
    <script src="c3.min.js"></script>
</head>

<body>
    <!-- sidebar -->
    <div id="info">
        <div id="title">
            Overdose deaths in the USA by; drug type, sex, age, race, and Hispanic origin
            <span><a href="https://catalog.data.gov/dataset/drug-overdose-death-rates-by-drug-type-sex-age-race-and-hispanic-origin-united-states-3f72f" target="_blank"><i class="bi bi-twitter"></i></a></span>
            <span><a href="https://github.com/zahrafiroz" target="_blank"><i class="bi bi-github"></i></a></span>
            <span id="reset"><a href="#">reset</a></span>
        </div>
        <div id="count" class="card">
            <h5 id="desc"> # Overdose deaths in the displaying region</h5>
            <p id="overdose-count"></p>
        </div>
        <div id="overdose-chart"></div>

        <div id="footer">
            The data provided in this smart dashboard was taken from catalog.data.gov Published by: Centers for Disease Control and Prevention Maintained by: National Center for Health Statistics.
        </div>
    </div>
    <div id="map"></div>
    <div id="legend"></div>
    <script>
 mapboxgl.accessToken =
            'pk.eyJ1IjoiemFocmFmaXJveiIsImEiOiJjbHJ0b2U5OWcwOGZ1MnJvZWd5eHJxZHRiIn0.UAlpZ7eUZCoP02oOa7xGKA';

        // declare the map object
let map = new mapboxgl.Map({
            container: 'map', // container ID
            style: 'mapbox://styles/mapbox/dark-v10',
            zoom: 5, // starting zoom
            minZoom: 5,
            center: [138, 38] // starting center
        });
 async function geojsonFetch() {

            // Await operator is used to wait for a promise. 
            // An await can cause an async function to pause until a Promise is settled.
            let response;
            response = await fetch('overdose.json');
            earthquakes = await response.json();



            //load data to the map as new layers.
            //map.on('load', function loadingData() {
            map.on('load', () => { //simplifying the function statement: arrow with brackets to define a function

                // when loading a geojson, there are two steps
                // add a source of the data and then add the layer out of the source
                map.addSource('overdose', {
                    type: 'json',
                    data: overdose
        });
    </script>
</body>

</html>
